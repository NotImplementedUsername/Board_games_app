{% extends "Board_games/base.html" %}
<title>{{ game.title }}</title>

{% block content %}
    <h2>{{ game.title }}</h2>
    <ul class="list-group list-group-horizontal">
        <li class="list-group-item"><strong>Autor:</strong> {{ game.author }}</li>
        <li class="list-group-item"><strong>Wydawca:</strong> {{ game.publisher }}</li>
        <li class="list-group-item"><strong>Liczba graczy:</strong> {{ game.min_players }} - {{ game.max_players }}</li>
        <li class="list-group-item"><strong>Czas gry:</strong> {{ game.time }}</li>
    </ul>

    {% if user.is_authenticated %}
        <form method="post" action="{% url 'add_comment' game_id=game.id %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-primary mt-3 mb-3">Dodaj opiniÄ™</button>
        </form>
    {% endif %}

    <div class="mb-6"></div>

    <h2>Opinie</h2>
    <div class="list-group">
        {% for comment in game.comments_set.all|dictsortreversed:"comment_date" %}
            <a class="list-group-item list-group-item-action" aria-current="true">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1">{{ comment.user.nickname }}: <span class="badge bg-primary rounded-pill">{{ comment.rating }}</span></h5>
                    <small>{{ comment.comment_date }}</small>
                </div>
                <p class="mb-1">{{ comment.comment }}</p>
            </a>
        {% endfor %}
    </div>
{% endblock %}